<div id="chatbot-widget-container">
  <button
    id="chat-toggle-button"
    class="fixed bottom-6 right-6 z-50 bg-brand-blue text-white p-3 rounded-full shadow-2xl hover:bg-brand-blue/80 transition duration-300"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="w-10 h-10"
    >
      <path d="M12 8V4H8" />
      <rect width="16" height="12" x="4" y="8" rx="2" />
      <path d="M4 14.5h16" />
      <path d="M8 18v2" />
      <path d="M16 18v2" />
    </svg>
  </button>
  <div
    id="main-chat-window"
    class="fixed bottom-24 right-4 z-40 w-[360px] max-w-[92vw] bg-white/95 backdrop-blur-xl border border-gray-200 rounded-2xl shadow-2xl overflow-hidden flex flex-col h-[70vh] min-h-[420px] max-h-[640px] transform translate-y-full opacity-0 transition-all duration-300"
  >
    <header
      class="p-4 bg-gradient-to-r from-brand-blue to-brand-purple text-white shadow-md flex items-center gap-3 flex-shrink-0"
    >
      <div
        class="flex items-center justify-center h-9 w-9 rounded-full bg-white/10 ring-1 ring-white/30"
      >
        <span class="font-bold">V</span>
      </div>
      <div class="flex flex-col">
        <h1 class="text-xl font-bold leading-tight">Vector</h1>
        <div class="text-xs opacity-90">Website Assistant</div>
      </div>
    </header>
    <div
      id="chat-container"
      class="chat-container flex-grow overflow-y-auto p-4 space-y-4 bg-gray-50"
    >
      <div class="flex justify-start">
        <div
          class="max-w-xs md:max-w-md p-3 rounded-lg bg-gray-100 text-gray-800 shadow-sm"
        >
          <p class="font-semibold text-sm mb-1 text-brand-blue">Vector</p>
          <p class="text-sm">
            Hi! I’m Vector, your assistant trained on this site’s content. Ask
            me anything about our services, products, or information.
          </p>
        </div>
      </div>
      <div id="loading-indicator" class="hidden flex justify-start">
        <div class="p-3 rounded-lg bg-gray-100 shadow-sm">
          <div class="flex items-center space-x-2">
            <div
              class="w-2 h-2 bg-brand-blue rounded-full animate-bounce"
            ></div>
            <div
              class="w-2 h-2 bg-brand-blue rounded-full animate-bounce"
            ></div>
            <div
              class="w-2 h-2 bg-brand-blue rounded-full animate-bounce"
            ></div>
          </div>
        </div>
      </div>
    </div>
    <div id="training-area" class="hidden">
      <textarea id="website-content-input" rows="12">
--- CHATBOT SYSTEM INSTRUCTIONS AND CONTEXT ---

You are Bloop, a helpful, professional, and tech-savvy AI assistant for RC Digital Creations.

Your primary goal is to answer user questions using ONLY the information provided in the CONTEXT below.

IF THE CONTEXT DOES NOT CONTAIN THE ANSWER:
You must respond with: "I'm sorry, I couldn't find information about that specific topic in the provided content. Please try rephrasing your question or check the website directly."

SMALL TALK AND PERSONALITY:
You are permitted to engage in brief, friendly small talk (e.g., greeting the user, confirming the weather, asking how their day is going) only before or after providing a factual answer. Your personality is polite, community-focused, and slightly technical. Never make up facts about the business.

--- RC DIGITAL CREATIONS CONTEXT ---

BUSINESS OVERVIEW:
Name: RC Digital Creations (RCDC).
Owner: Ruan Coetzee.
Location: Based in Stilbaai, South Africa. We happily serve clients remotely worldwide.
Mission: To provide professional, high-quality digital solutions for small to medium businesses.
Contact: info@rcdigitalcreations.co.za | Phone: 063 473 3098.

CORE SERVICES:
1. Web Development: Custom, responsive websites using modern stacks (HTML/CSS/JS), WordPress setups, and custom e-commerce solutions.
2. Mobile Applications: Development of native Android apps and successful publishing to the Google Play Store.
3. AI Integration: Custom chatbot deployment (like Bloop!) and integration of AI tools to automate business workflows.
4. Geo-Spatial Analysis: Specialized mapping, data visualization, and environmental data analysis leveraging Ruan's BSc Honours background in Geography.
</textarea
      >
    </div>
    <div class="p-4 border-t border-gray-200 flex space-x-3 bg-white">
      <input
        type="text"
        id="user-input"
        placeholder="Type your message..."
        class="flex-grow p-3 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-brand-blue transition duration-150 bg-white text-gray-900 placeholder-gray-500"
      />
      <button
        id="send-button"
        class="bg-brand-blue text-white p-3 rounded-full shadow-lg hover:bg-brand-blue/80 transition duration-150 disabled:bg-gray-400 disabled:cursor-not-allowed flex-shrink-0"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-send"
        >
          <path d="m22 2-7 20-4-9-9-4Z" />
          <path d="M22 2 11 13" />
        </svg>
      </button>
    </div>
  </div>
</div>
